<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>soundlake</title><link href="https://soundlake.net/" rel="alternate"></link><link href="https://soundlake.net/feeds/all.atom.xml" rel="self"></link><id>https://soundlake.net/</id><updated>2018-04-02T21:51:00+02:00</updated><entry><title>The Exhaustive Guide to Build Pelican Blog with Github and Travis-CI</title><link href="https://soundlake.net/exhaustive-guide-to-build-pelican-blog-with-github-and-travis-ci.html" rel="alternate"></link><published>2018-04-02T10:28:00+02:00</published><updated>2018-04-02T21:51:00+02:00</updated><author><name>soundlake</name></author><id>tag:soundlake.net,2018-04-02:/exhaustive-guide-to-build-pelican-blog-with-github-and-travis-ci.html</id><summary type="html">&lt;p&gt;A single document for the walkthrough setup your static page blog with Pelican on Github and Travis-CI.&lt;/p&gt;</summary><content type="html">&lt;h3&gt;Introduction&lt;/h3&gt;
&lt;p&gt;I'm writing this mostly for archiving what I've done for setting up this blog.&lt;/p&gt;
&lt;p&gt;The internet is very big water, and you can whatever you want, but I couldn't
find a single document that explain everything.&lt;/p&gt;
&lt;p&gt;I know. In this software world, you can never &lt;em&gt;explain everything&lt;/em&gt;. But I
wanted a bit more kind and careful document to show me the walkthrough.&lt;/p&gt;
&lt;p&gt;The followings are the tech that I've used for setting up my new blog.&lt;/p&gt;
&lt;h3&gt;Setup in Local&lt;/h3&gt;
&lt;p&gt;Firstly, I've checked with &lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt;. There are many options, and actually
&lt;a href="https://github.com"&gt;Github&lt;/a&gt; seems easy with &lt;a href="https://jekyllrb.com"&gt;Jekyll&lt;/a&gt;, but &lt;a href="http://www.ruby-lang.org"&gt;Ruby&lt;/a&gt; is not my best thing, while
I'm a kind of fond of &lt;a href="https://www.python.org"&gt;Python&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To use &lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt;, you can just install it with &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt; it, but there are a
somewhat downside of &lt;a href="https://www.python.org"&gt;Python&lt;/a&gt;, which is &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt; installs those dependencies
globally.&lt;/p&gt;
&lt;p&gt;If you are familiar with &lt;a href="https://www.linux.org"&gt;Linux&lt;/a&gt; system, it looks rather natural and normal for
you, but if you are one of the modern developers who likes JavaScript eco
system like &lt;a href="https://www.npmjs.com"&gt;npm&lt;/a&gt;, then installing dependency only globally might look wierd.&lt;/p&gt;
&lt;h4&gt;VirtualEnv&lt;/h4&gt;
&lt;p&gt;Here comes &lt;a href="https://virtualenv.pypa.io"&gt;VirtualEnv&lt;/a&gt;. This tricks the system, and make the dependency able
to be installed locally avoiding to corrupt the whole system.&lt;/p&gt;
&lt;h5&gt;Install VirtualEnv&lt;/h5&gt;
&lt;p&gt;Fortunately, &lt;a href="https://www.debian.org"&gt;Debian&lt;/a&gt; team did a good job with keeping the packages up-to-date.
You can simply install &lt;a href="https://virtualenv.pypa.io"&gt;VirtualEnv&lt;/a&gt; by&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install python-virtualenv
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Using VirtualEnv&lt;/h5&gt;
&lt;p&gt;Now, let's choose a directory, and make it the virtual environment of your
python system.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;virutalenv path/to/the/directory
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To enable the virtual environment, you should just run following command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; path/to/the/directory
&lt;span class="nb"&gt;source&lt;/span&gt; bin/activate
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;[&lt;code&gt;source&lt;/code&gt;] is &lt;a href="https://www.gnu.org/software/bash"&gt;bash&lt;/a&gt;'s built-in command. According to the document, that I
linked, it does the following.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Read and execute commands from the filename argument in the current shell
context.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, &lt;code&gt;source bin/activate&lt;/code&gt; command read the file, and alter the &lt;a href="https://www.gnu.org/software/bash"&gt;bash&lt;/a&gt;'s
environment, and makes you can run executable in the virtual environment.&lt;/p&gt;
&lt;p&gt;That's why deactivating this virtual environment is so easy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;deactivate
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Becuase this &lt;code&gt;deactivate&lt;/code&gt; is already in your &lt;code&gt;PATH&lt;/code&gt;, although it won't be after
running this.&lt;/p&gt;
&lt;h4&gt;Pelican&lt;/h4&gt;
&lt;h5&gt;Install Pelican&lt;/h5&gt;
&lt;p&gt;After I activated the virtual environment, I've created a file called
&lt;code&gt;requirements.txt&lt;/code&gt;. It isn't necessarilly named like that, but it's on &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt;'s
&lt;a href="https://pip.pypa.io/en/stable/user_guide/#requirements-files"&gt;document&lt;/a&gt;, and
commonly used for &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt;'s dependency list.&lt;/p&gt;
&lt;p&gt;This is the content of the file. This is simple file, and each line has each
&lt;a href="https://www.python.org"&gt;Python&lt;/a&gt; module name.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pelican
markdown
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt; supports &lt;a href="http://docutils.sourceforge.net/rst.html"&gt;reStructedText&lt;/a&gt; by default, but it doesn't &lt;a href="https://daringfireball.net/projects/markdown"&gt;Markdown&lt;/a&gt;. I
personally prefer &lt;a href="https://daringfireball.net/projects/markdown"&gt;Markdown&lt;/a&gt; to &lt;a href="http://docutils.sourceforge.net/rst.html"&gt;reStructedText&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;Using Pelican&lt;/h5&gt;
&lt;p&gt;The next things to do is starting your &lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt; instance. The developers of
&lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt; are kind enough to provide you a easy-bootstraping command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pelican-quickstart
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will create some directories and files, including &lt;code&gt;Makefile&lt;/code&gt;,
&lt;code&gt;develop_server.sh&lt;/code&gt;, &lt;code&gt;pelicanconf.py&lt;/code&gt;, &lt;code&gt;publishconf.py&lt;/code&gt;. With first two files,
you have a bit of automation for building your &lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt; site locally during
developing. With the other two files, you can configure your &lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt; site as
you want.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;make devserver
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will turn on the watcher on &lt;code&gt;content&lt;/code&gt; directory, &lt;code&gt;themes&lt;/code&gt; directory, and
the configuration files including two that I mentioned above. Also, it turns on
the HTTP server which listens 8000 port by default.&lt;/p&gt;
&lt;h5&gt;Choosing a Theme&lt;/h5&gt;
&lt;p&gt;From &lt;a href="http://www.pelicanthemes.com"&gt;here&lt;/a&gt;, you can check various themes and its
screenshots. IIRC, all of them are hosted in &lt;a href="https://github.com"&gt;Github&lt;/a&gt;, and you can clone the
repository of the theme into your &lt;code&gt;themes&lt;/code&gt; directory. After set &lt;code&gt;THEME&lt;/code&gt; variable
to the path to the directory you've cloned, then it's good to go.&lt;/p&gt;
&lt;p&gt;There might be a few little changes necessary, like color, some configuration
variable, or even the layout of the theme.&lt;/p&gt;
&lt;h3&gt;Continuous Integration&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; is one of popular CI service. And it's well integrated with
&lt;a href="https://github.com"&gt;Github&lt;/a&gt;. You can register to &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; with &lt;a href="https://github.com"&gt;Github&lt;/a&gt; account.&lt;/p&gt;
&lt;p&gt;With &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt;, you can push your content and source into &lt;code&gt;master&lt;/code&gt; branch of
your &lt;a href="https://github.com"&gt;Github&lt;/a&gt;, and &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; will do the left, including building the source
and push to &lt;code&gt;gh-pages&lt;/code&gt; branch.&lt;/p&gt;
&lt;h4&gt;Github Repository&lt;/h4&gt;
&lt;p&gt;Here's a tip for the &lt;a href="https://github.com"&gt;Github&lt;/a&gt; repository you'll make. Don't use
&lt;code&gt;username.github.io&lt;/code&gt;. That repository is designed for using &lt;a href="https://github.com"&gt;Github&lt;/a&gt;'s default
making web site system, so using &lt;code&gt;gh-pages&lt;/code&gt; is simply not possible with this
repository.&lt;/p&gt;
&lt;p&gt;Let's make a new repository. You don't need to add any additional file, because
we are not going to clone this repository. Rather, we'll set it to the remote
repository of the local repository.&lt;/p&gt;
&lt;p&gt;If you haven't initialized your local repository, just do this.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; path/to/the/directory
git init
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then with this command, set the remote repository.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git remote add origin url_of_the_github_repo
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, you can push to the &lt;a href="https://github.com"&gt;Github&lt;/a&gt; repository, you've created.&lt;/p&gt;
&lt;h4&gt;Travis&lt;/h4&gt;
&lt;p&gt;Once you've created &lt;a href="https://github.com"&gt;Github&lt;/a&gt;'s public repository, you can find it in &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt;
dashboard. It's on &lt;code&gt;https://travis-ci.org/profile/{Github Username}&lt;/code&gt;. In this
page, you can activate the continuous integration by your &lt;a href="https://github.com"&gt;Github&lt;/a&gt; repository.&lt;/p&gt;
&lt;p&gt;Now, you need to create &lt;code&gt;.travis.yml&lt;/code&gt; file in your repository.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;language&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;python&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;3.6&amp;#39;&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;branches&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;only&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;master&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;install&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pip install -r requirements.txt&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;script&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;make publish&lt;/span&gt;

&lt;span class="l l-Scalar l-Scalar-Plain"&gt;deploy&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;provider&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pages&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;skip-cleanup&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;github-token&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;$GITHUB_TOKEN&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;keep-history&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;local-dir&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;output&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;on&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
      &lt;span class="l l-Scalar l-Scalar-Plain"&gt;branch&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is my configuration file. My configuration has mainly two part. The former
is to build the &lt;a href="https://blog.getpelican.com"&gt;Pelican&lt;/a&gt; site, and the latter is to push to &lt;code&gt;gh-pages&lt;/code&gt; of the
&lt;a href="https://github.com"&gt;Github&lt;/a&gt; repository.&lt;/p&gt;
&lt;p&gt;Note that there is &lt;code&gt;$GITHUB_TOKEN&lt;/code&gt;.&lt;/p&gt;
&lt;h4&gt;Github Token&lt;/h4&gt;
&lt;p&gt;My configuration of &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; pushes to my repository. To make it possible,
we need to tell &lt;a href="https://github.com"&gt;Github&lt;/a&gt; to allow &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; to do that. This is why the token
is required.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/"&gt;Here&lt;/a&gt;'s
how to create the token. When you create the token, don't forget to check
&lt;code&gt;public_repo&lt;/code&gt; scope. That's the scope that allows &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; to push a new
commits to your &lt;a href="https://github.com"&gt;Github&lt;/a&gt; repository.&lt;/p&gt;
&lt;p&gt;After you create the token, copy it and go to &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt;'s repository settings
page. The url would be &lt;code&gt;https://travis-ci.org/{username}/{repo name}/settings&lt;/code&gt;.
In that page, you can configure the environment variables. Creat a new variable
with &lt;code&gt;GITHUB_TOKEN&lt;/code&gt; for the name and the copied token for the value.&lt;/p&gt;
&lt;p&gt;Now, if you push the &lt;code&gt;master&lt;/code&gt; branch, then &lt;a href="https://travis-ci.org"&gt;Travis CI&lt;/a&gt; will be noticed. Then,
it will build, make a new commit, and push to &lt;code&gt;gh-pages&lt;/code&gt; branch. It's the time
to check out &lt;code&gt;https://{username}.github.io/{repo name}&lt;/code&gt;&lt;/p&gt;</content><category term="github"></category><category term="travis"></category><category term="pelican"></category><category term="python"></category><category term="CI"></category></entry></feed>